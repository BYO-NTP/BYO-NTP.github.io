<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BYO NTP GNSS Timing Performance</title>
  <link rel="stylesheet" href="/style.css">
  <meta name="description" content="A table showing the timing performance of various GNSS receivers and configurations on different hardware and operating systems.">

  <meta property="og:title" content="GNSS Timing Performance">
  <meta property="og:description" content="A table showing the timing performance of various GNSS receivers and configurations on different hardware and operating systems.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://byo-ntp.github.io/accuracy.html">
  <meta property="og:image" content="https://byo-ntp.github.io/img/logo/BYO-NTP-logo.jpeg">
  
  <meta charset="UTF-8">
  <title>GNSS Timing Performance</title>
  <style>
    body {
      font-size: 0.8em;
      padding: 1em;
      background-color: #f9f9f9;
    }
    h1 {
      text-align: center;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 1200px;
      margin: auto;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.4em;
      text-align: center;
    }
    th {
      background-color: #eaeaea;
    }
    th.small {
      font-size: 0.7em;
      color: #a1a1a1;
    }
    td:empty {
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>
  <h1>GNSS Timing Performance</h1>
  <p class="small center" style="margin-top: -14px;">
    by: <a href="https://github.com/BYO-NTP/recipes/wiki">Build Your Own NTP server</a></p>

  <div style="display: flex; width: 80%; text-align: center; max-width: 1200px; align-items: center; justify-content: center; gap: 1em; margin: auto;">
    <div style="flex: 1; text-align: left;" class="legend">
      <p class="color-ms">ms = millisecond = 1e-3  = 0.001</p>
      <p class="color-us">Âµs = microsecond = 1e-6  = 0.000001</p>
      <p class="color-ns">ns = nanosecond  = 1e-9  = 0.000000001</p>
      <p class="color-ps">ps = picosecond  = 1e-12 = 0.000000000001</p>
    </div>
    <div style="flex: 1; align-items: center; justify-content: right; max-width: 300px;">
      <img id="gnss_performance_graph" src="" alt="Hover over a cell to preview a graph of GNSS accuracy." height="85px; width: auto;">
    </div>
  </div>

  <p class="center">This table shows the timing performance of various GNSS receivers on varying hardware,
     operating systems, and NTP daemons. Each numeric value is the most inaccurate reading measured during a 12
     hour measuring interval. The 3 left header columns are clickable links to the build recipe for that row.
     The numeric values are clickable and will open an image of the GNSS performance graph for that row.
  </p>
  <table id="timing-table">
    <thead>
      <tr>
        <th>HW</th>
        <th>OS</th>
        <th>daemon</th>
        <th>6M</th>
        <th>Stratux<br>VK-162 / U7</th>
        <th>NEO-7M</th>
        <th>MAX-M8Q</th>
        <th>LEA-M8T</th>
        <th>M10</th>
      </tr>
    </thead>
    <tbody>
      <tr><th>Pi 4</th><th>Pi OS</th><th>chrony</th>
          <td>0.000000222</td><td>0.001010</td><td>0.000000268</td><td>0.000002850</td><td>0.000000206</td><td></td></tr>
      <tr><th class="grey">Pi 4</th><th class="grey">Pi OS</th><th>sec</th>
          <td>0.000006000</td><td>0.015400</td><td>0.000003000</td><td>0.000005900</td><td>0.000004000</td><td></td></tr>
      <tr><th class="grey">Pi 4</th><th class="grey">Pi OS</th><th>sec + gpsd</th>
          <td>0.000004100</td><td>0.006210</td><td>0.000002700</td><td>0.000005000</td><td>0.000004000</td><td></td></tr>
      <tr><th class="grey">Pi 4</th><th class="grey">Pi OS</th><th>ntp</th>
          <td>0.000031000</td><td>0.006020</td><td>0.000004000</td><td>0.000003000</td><td>0.000005000</td><td></td></tr>
      <tr><th class="grey">Pi 4</th><th>BSD</th><th>chrony</th>
          <td>0.000000522</td><td>0.001940</td><td>           </td><td>0.000001910</td><td>0.000000315</td><td></td></tr>
      <tr><th class="grey">Pi 4</th><th class="grey">BSD</th><th>sec</th>
          <td>0.000011000</td><td>0.002780</td><td>0.000015000</td><td>0.000011000</td><td>0.000007000</td><td></td></tr>
      <tr><th class="grey">Pi 4</th><th class="grey">BSD</th><th>ntp</th>
          <td>0.000012000</td><td>0.003740</td><td>0.000016000</td><td>0.000011000</td><td>0.000004000</td><td></td></tr>
      <tr><th class="grey">Pi 4</th><th class="grey">BSD</th><th>ntp + gpsd</th>
          <td>0.000024000</td><td>0.013000</td><td>0.000023000</td><td>0.000002320</td><td>           </td><td></td></tr>
      <tr><th>&nbsp;</th><th></th><th></th><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><th>Pi 5</th><th>Pi OS</th><th>chrony</th>
          <td>0.000000313</td><td>0.001270</td><td>           </td><td>0.000000170</td><td>0.000000174</td><td></td></tr>
      <tr><th class="grey">Pi 5</th><th class="grey">Pi OS</th><th>sec</th>
          <td>0.000012000</td><td>0.010200</td><td>           </td><td>0.000002000</td><td>0.000003000</td><td></td></tr>
      <tr><th class="grey">Pi 5</th><th class="grey">Pi OS</th><th>ntp</th>
          <td>0.000005000</td><td>0.006760</td><td>           </td><td>0.000003000</td><td>0.000005000</td><td></td></tr>
      <tr><th class="grey">Pi 5</th><th>BSD</th><th>chrony</th>
          <td>0.000019500</td><td>0.002660</td><td>           </td><td>0.000001730</td><td>0.000003320</td><td></td></tr>
      <tr><th class="grey">Pi 5</th><th class="grey">BSD</th><th>sec</th>
          <td>0.000022000</td><td>0.007110</td><td>           </td><td>0.000039000</td><td>0.000071000</td><td></td></tr>
      <tr><th class="grey">Pi 5</th><th class="grey">BSD</th><th>sec + gpsd</th>
          <td>0.000015000</td><td>0.007410</td><td>           </td><td>0.000017000</td><td>0.000066000</td><td></td></tr>
      <tr><th class="grey">Pi 5</th><th class="grey">BSD</th><th>ntp</th>
          <td>0.000025000</td><td>0.005510</td><td>           </td><td>0.000032000</td><td>0.000070000</td><td></td></tr>
      <tr><th>&nbsp;</th><th></th><th></th><td></td>        <td></td><td></td><td></td><td></td><td></td></tr>
      <tr><th>LarkBox</th><th>BSD</th><th>chrony</th>
          <td>0.000004500</td><td>0.006880</td><td>0.0000049</td><td>0.000001910</td><td>0.000012600</td><td></td></tr>
      <tr><th class="grey">LarkBox</th><th class="grey">BSD</th><th>sec</th>
          <td>0.024900000</td><td>0.015000</td><td>0.0000880</td><td>0.000045000</td><td>0.000058000</td><td></td></tr>
      <tr><th class="grey">LarkBox</th><th class="grey">BSD</th><th>sec + gpsd</th>
          <td>0.000025000</td><td>0.013900</td><td>0.0000720</td><td>0.000017000</td><td>0.000045000</td><td></td></tr>
      <tr><th class="grey">LarkBox</th><th class="grey">BSD</th><th>ntp</th>
          <td>0.021700000</td><td>0.009190</td><td>0.0000510</td><td>0.000061000</td><td>0.000047000</td><td></td></tr>
      <tr><th class="grey">LarkBox</th><th class="grey">BSD</th><th>ntp + gpsd</th>
          <td>           </td><td>        </td><td>0.0001430</td><td>0.000057000</td><td>0.000025000</td><td></td></tr>
      <tr><th class="grey">LarkBox</th><th>Win</th><th>ntp</th>
          <td>           </td><td>0.013600</td><td></td><td></td><td></td><td></td></tr>
      <tr><th>&nbsp;</th><th></th><th></th><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><th>Xeon E5</th><th>BSD</th><th>chrony</th>
          <td>           </td><td>        </td><td>         </td><td>0.000000426</td><td>            </td><td></td></tr>
      <tr><th class="grey">Xeon E5</th><th class="grey">BSD</th><th>sec</th>
          <td>           </td><td>        </td><td>         </td><td>0.000002000</td><td>            </td><td></td></tr>
      <tr><th class="grey">Xeon E5</th><th class="grey">BSD</th><th>ntp</th>
          <td>           </td><td>        </td><td>         </td><td>0.000004000</td><td>            </td><td></td></tr>
      <tr><th class="grey">Xeon E5</th><th>Linux</th><th>chrony</th>
          <td>           </td><td>        </td><td>         </td><td>0.000008810</td><td>            </td><td></td></tr>
      <tr><th>&nbsp;</th><th></th><th></th><td></td><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><th>M3 MBA</th><th>Mac</th><th>chrony</th>
          <td>0.00172    </td><td>        </td><td>0.001580 </td><td>           </td><td>            </td><td></td></tr>
      <tr><th class="grey">M3 MBA </th><th class="grey">Mac</th><th>mac-pps</th>
          <td>           </td><td>        </td><td>0.000358 </td><td>           </td><td>0.000372   </td><td></td></tr>
      <tr><th class="grey">M3 MBA </th><th class="grey">Mac</th><th>sec</th>
          <td>           </td><td>        </td><td>0.008000 </td><td>           </td><td>            </td><td></td></tr>
      <tr><th class="grey">M3 MBA </th><th class="grey">Mac</th><th>sec + gpsd</th>
          <td>           </td><td>        </td><td>0.007890 </td><td>           </td><td>            </td><td></td></tr>
    </tbody>
  </table>

  <div class="legend">
    <p>BSD = FreeBSD 14</p>
    <p>Linux = Debian 12 (Bookworm)</p>
    <p>Pi OS = Raspberry Pi OS 12 Lite (Bookworm)</p>
    <p>Mac = macOS 15 (Sequoia)</p>
    <p>Win = Windows 11</p>
  </div>

  <div id="lightbox-overlay" style="display: none;">
    <span id="close-btn">&times;</span>
    <img id="lightbox-img" src="" alt="Enlarged">
  </div>

  <footer>
    <p>BYO-NTP is a community project. Please contribute on <a href="https://github.com/BYO-NTP/recipes/wiki">GitHub</a>.</p>
  </footer>

  <script>
    const isNumeric = (val) => /^\d*\.?\d+$/.test(val);
    function styleCell (td) {
      const val = parseFloat(td.textContent);
      if (td.textContent.trim() === '0' || val === 0) {
        td.classList.add('color-white');
      } else if (!isNaN(val)) {
        if (val >= 0.001 && val < 1) {
          td.classList.add('color-ms');
        } else if (val >= 0.000001 && val < 0.001) {
          td.classList.add('color-us');
        } else if (val >= 0.000000001 && val < 0.000001) {
          td.classList.add('color-ns');
        } else if (val >= 0.000000000001 && val < 0.000000001) {
          td.classList.add('color-ps');
        }
      }
    }

    function getRowRecipe (th) {
      if (th.length < 1) return;

      switch (th[1].textContent.trim()) {
        case 'Pi OS': return 'Pi-OS-12-GPIO';
        case 'BSD':
          switch (th[0].textContent.trim()) {
            case 'Pi 4': return 'FreeBSD-14-GPIO';
            case 'Pi 5':
            case 'LarkBox': return 'FreeBSD-14-USB';
            case 'Xeon E5': return 'FreeBSD-14-UART';
          }
        case 'Mac': return 'macOS';
        case 'Win': return 'Windows-11-USB';
      }
    }

    function getCellImage (th, tdIndex) {
      const gnss = ['6M', 'U7', '7M', 'M8Q', 'M8T', 'M10'];

      if (th.length < 1) return;

      let imgHW = th[0].textContent.trim().replace(/\s/g, '').toLowerCase()
      switch (th[0].textContent.trim()) {
        case 'Xeon E5': imgHW = 'xeonE5'; break
        case 'M3 MBA': imgHW = 'm3'; break
      }

      let imgOS = th[1].textContent.trim().toLowerCase().replace(/\s/g, '')
      switch (th[1].textContent.trim()) {
        case 'Linux': imgOS = 'deb'; break
      }

      let imgDaemon = th[2].textContent.trim().toLowerCase().replace(/\s/g, '').replace(/\+/g, '-')
      switch (th[2].textContent.trim()) {
        case 'mac-pps': imgDaemon = 'pollpps'; break
      }

      let imgGNSS = gnss[tdIndex];

      if (imgHW && imgOS && imgDaemon && imgGNSS) {
        return `https://byo-ntp.github.io/img/ublox/${imgGNSS}/${imgHW}-${imgOS}-${imgGNSS.toLowerCase()}-${imgDaemon}.png`
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const graph = document.getElementById('gnss_performance_graph')
      const overlay = document.getElementById('lightbox-overlay')
      const lbImg = document.getElementById('lightbox-img')
      const table = document.getElementById('timing-table')
      const rows = table.querySelectorAll('tbody tr')
      for (const row of rows) {
        const th = row.querySelectorAll('th')
        const recipe = getRowRecipe(th)
        if (recipe) {
          for (const td of th) {
            td.onclick = () => window.open(`https://github.com/BYO-NTP/recipes/wiki/${recipe}`)
          }
        }

        const cells = row.querySelectorAll('td')
        let cellIndex = 0
        for (const td of cells) {
          if (td.textContent.trim() !== '') {
            styleCell(td)
            const imgURI = getCellImage(th, cellIndex)
            if (graph && imgURI) {
              td.onclick = () => {
                td.classList.add('lightbox-link')
                overlay.style.display = 'flex'
                lbImg.src = imgURI
              }
              td.onmouseover = () => { graph.src = imgURI; }
              td.onmouseout = () => { graph.src = ''; }
            }
          }
          cellIndex++
        }
      }
    })

    document.getElementById('close-btn').addEventListener('click', () => {
      document.getElementById('lightbox-overlay').style.display = 'none'
    })
  </script>
</body>
</html>